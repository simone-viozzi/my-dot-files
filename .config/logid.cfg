devices: ({
    name: "Wireless Mouse MX Master 3";

    // A lower threshold number makes the wheel switch to free-spin mode
    // quicker when scrolling fast.
    smartshift:
    {
        on: true;
        threshold: 15;
    };

    hiresscroll:
    {
        hires: false;
        invert: false;
        target: true;
        up: {
            mode: "Axis";
            axis: "REL_WHEEL";
            axis_multiplier: 1.5;
        },
        down: {
            mode: "Axis";
            axis: "REL_WHEEL";
            axis_multiplier: -1.5;
        },
    };

    // Higher numbers make the mouse more sensitive (cursor moves faster),
    // 4000 max for MX Master 3.
    dpi: 1750;
    // io_timeout = 500;

    buttons: (
    {
        // Gesture Button
        cid: 0xc3;
        action =
        {
            type: "Gestures";
            gestures: (
            {
                direction: "Up";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_UP" ];
                };
            },
            {
                direction: "Down";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_DOWN" ];
                };
            },
            {
                direction: "Left";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_LEFT" ];
                };
            },
            {
                direction: "Right";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_RIGHT" ];
                };
            },
            {
                direction: "None"
                mode: "OnRelease"
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_TAB" ];
                };
            }
            );
        }
    },
    {
        // Toggle SmartShift
        cid: 0xc4;
        action =
        {
            type: "Gestures";
            gestures: (
            {
                direction: "None";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_F" ];
                }
            },
            {
                direction: "Up";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_BACKSLASH" ];
                }
            },
            {
                direction: "Down";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_LEFTSHIFT", "KEY_BACKSLASH" ];
                }
            },
            {
                direction: "Left";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_K" ];
                }
            },
            {
                direction: "Right";
                mode: "OnRelease";
                action =
                {
                    type: "Keypress";
                    keys: [ "KEY_LEFTMETA", "KEY_J" ];
                }
            }
            );
        };
    },
    {
        // Back Button
        cid: 0x53;
        action =
        {
            type: "Keypress";
            keys: [ "KEY_PAGEDOWN" ];
        };
        //action =
        //{
        //    type: "Gestures";
        //    gestures: (
        //    {
        //        direction: "None";
        //        mode: "OnRelease";
        //        action =
        //        {
        //            type: "Keypress";
        //            keys: [ "KEY_PAGEDOWN" ];
        //        }
        //    },
        //    );
        //};
    },
    {
        // Forward Button
        cid: 0x56;
        action =
        {
            type: "Keypress";
            keys: [ "KEY_PAGEUP" ];
        };
        //action =
        //{
        //    type: "Gestures";
        //    gestures: (
        //    {
        //        direction: "None";
        //        mode: "OnRelease";
        //        action =
        //        {
        //            type: "Keypress";
        //            keys: [ "KEY_PAGEUP" ];
        //        }
        //    },
        //    );
        //};
    }
    );

    thumbwheel:
    {
        divert: true;
        invert: true;

        left: {
            mode: "Axis";
            axis: "REL_HWHEEL";
            axis_multiplier: 0.5;
        },
        right: {
            mode: "Axis";
            axis: "REL_HWHEEL";
            axis_multiplier: -0.5;
        },

        tap: {
            type: "Keypress";
            keys: [ "KEY_LEFTMETA", "KEY_LEFTCTRL", "KEY_TAB" ];
        };
    };

}
);
